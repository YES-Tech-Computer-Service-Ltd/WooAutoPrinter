# ESC/POS 打印机指令集

本文档说明WooAuto应用程序中实现的主要ESC/POS打印机指令。

## 基本格式指令

| 功能 | 指令 | 十六进制 | 说明 |
|-----|-----|---------|-----|
| 初始化打印机 | ESC @ | 1B 40 | 重置打印机到初始状态 |
| 换行 | LF | 0A | 打印并换行 |
| 回车 | CR | 0D | 回车不换行 |
| 走纸n行 | ESC d n | 1B 64 n | n为行数 (1-255) |
| 走纸n点 | ESC J n | 1B 4A n | n为点数 (0-255) |

## 字符格式指令

| 功能 | 指令 | 十六进制 | 说明 |
|-----|-----|---------|-----|
| 设置字体 | ESC ! n | 1B 21 n | n为模式值(详见下文) |
| 加粗开启 | ESC E 1 | 1B 45 01 | 开启加粗模式 |
| 加粗关闭 | ESC E 0 | 1B 45 00 | 关闭加粗模式 |
| 下划线开启 | ESC - 1 | 1B 2D 01 | 开启下划线模式 |
| 下划线关闭 | ESC - 0 | 1B 2D 00 | 关闭下划线模式 |
| 对齐方式-左 | ESC a 0 | 1B 61 00 | 设置左对齐 |
| 对齐方式-中 | ESC a 1 | 1B 61 01 | 设置居中对齐 |
| 对齐方式-右 | ESC a 2 | 1B 61 02 | 设置右对齐 |

### ESC ! n 模式值说明

- 0x00: 标准模式
- 0x08: 强调模式(加粗)
- 0x10: 双高模式
- 0x20: 双宽模式
- 0x30: 双高双宽模式

## 切纸指令

| 功能 | 指令 | 十六进制 | 说明 |
|-----|-----|---------|-----|
| 全切 | GS V 0 | 1D 56 00 | 全切模式，完全切断纸张 |
| 部分切 | GS V 1 | 1D 56 01 | 部分切模式，不完全切断纸张 |
| 进纸并切纸 | GS V A n | 1D 56 41 n | 进纸n点后部分切纸，n为点数 |

## Star打印机专用指令

| 功能 | 指令 | 十六进制 | 说明 |
|-----|-----|---------|-----|
| 切纸 | ESC d n | 1B 64 02 | Star打印机专用切纸指令 |

## 项目中实现的主要指令

WooAuto应用程序中实现了多种打印机指令，包括:

1. **格式化文本**：通过ESC !和ESC a等指令实现文本格式控制
2. **走纸控制**：通过ESC d和LF指令控制打印纸走纸
3. **切纸功能**：
   - 对标准ESC/POS打印机使用GS V指令(1D 56 01)
   - 对Star品牌打印机使用专用ESC d指令(1B 64 02)
   - 应用程序会根据打印机品牌自动选择合适的切纸指令

## 使用方法

在PrinterConfig中可以设置`autoCut`属性来控制是否在打印完成后自动切纸:

```kotlin
val printerConfig = PrinterConfig(
    // 其他配置...
    autoCut = true,  // 设置为true启用自动切纸
)
```

## 支持的打印机品牌

应用程序能够识别以下打印机品牌并使用相应的指令集:

- 爱普生(EPSON)：使用标准ESC/POS指令
- 星星(STAR)：使用Star专用指令
- 佳博(BIXOLON)：使用BIXOLON指令
- 思普瑞特(SPRT)：使用ESC/POS指令
- 西铁城(CITIZEN)：使用ESC/POS指令
- 其他未知品牌：默认使用ESC/POS指令 